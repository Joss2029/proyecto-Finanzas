<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Control de Finanzas Galáctico</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #04050f;
  --surface: rgba(8,12,35,0.92);
  --surface2: rgba(14,20,52,0.75);
  --border: rgba(70,110,255,0.18);
  --border-hi: rgba(0,245,255,0.35);
  --cyan: #00f5ff;
  --purple: #b44fff;
  --gold: #ffc84a;
  --green: #00ff9f;
  --red: #ff4e6a;
  --text: #c8d4ff;
  --text-hi: #eef2ff;
  --muted: #4a5680;
  --radius: 14px;
}
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Exo 2', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* BACKGROUND */
#bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
.nebula { position: fixed; border-radius: 50%; filter: blur(90px); z-index: 0; pointer-events: none; opacity: 0.4; }
.nb1 { width:600px; height:600px; background:radial-gradient(circle,rgba(91,46,255,0.2),transparent); top:-100px; left:-100px; }
.nb2 { width:500px; height:500px; background:radial-gradient(circle,rgba(0,198,255,0.15),transparent); bottom:-100px; right:-100px; }

/* LOGIN SCREEN */
#login-screen {
  position: fixed; inset: 0; z-index: 1000;
  display: flex; align-items: center; justify-content: center;
  background: rgba(4,5,15,0.98); backdrop-filter: blur(15px);
}
.login-card {
  background: var(--surface); border: 1px solid var(--border);
  padding: 2.5rem; border-radius: 22px; text-align: center;
  width: 90%; max-width: 400px; box-shadow: 0 0 50px rgba(0,245,255,0.1);
}
.login-logo { font-family: 'Orbitron'; font-size: 1.5rem; font-weight: 900; color: var(--cyan); margin-bottom: 2rem; }
.lf-input {
  width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border);
  padding: 0.8rem; border-radius: 10px; color: #fff; margin-bottom: 1rem; text-align: center;
}
.login-btn {
  width: 100%; padding: 0.9rem; border: none; border-radius: 10px;
  background: linear-gradient(135deg, var(--cyan), var(--purple));
  color: #000; font-family: 'Orbitron'; font-weight: 700; cursor: pointer;
}

/* APP LAYOUT */
#app { position: relative; z-index: 10; max-width: 1200px; margin: 0 auto; padding: 1.5rem; display: none; }
.app-header {
  display: flex; justify-content: space-between; align-items: center;
  background: var(--surface); border: 1px solid var(--border);
  padding: 1rem 1.5rem; border-radius: var(--radius); margin-bottom: 1rem;
}
.nav { display: flex; gap: 0.5rem; margin-bottom: 1rem; overflow-x: auto; }
.nav-btn {
  background: var(--surface2); border: 1px solid var(--border); color: var(--text);
  padding: 0.6rem 1rem; border-radius: 8px; cursor: pointer; font-family: 'Orbitron'; font-size: 0.6rem;
}
.nav-btn.active { border-color: var(--cyan); color: var(--cyan); }

.panel { display: none; }
.panel.active { display: block; }
.card { background: var(--surface); border: 1px solid var(--border); padding: 1.2rem; border-radius: var(--radius); }
.g4 { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem; }
.card-val { font-family: 'Orbitron'; font-size: 1.2rem; font-weight: 700; color: var(--cyan); }

/* TOAST */
#toast {
  position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
  background: var(--surface2); border: 1px solid var(--gold); padding: 0.5rem 1rem;
  border-radius: 20px; font-size: 0.7rem; color: var(--gold); display: none; z-index: 2000;
}
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>
<div class="nebula nb1"></div>
<div class="nebula nb2"></div>
<div id="toast">Acción realizada</div>

<div id="login-screen">
  <div class="login-card">
    <div class="login-logo">FINANZAS ALPHA</div>
    <input type="text" id="l-user" class="lf-input" placeholder="USUARIO (admin)">
    <input type="password" id="l-pin" class="lf-input" placeholder="PIN (1234)">
    <button class="login-btn" onclick="login()">INICIAR SISTEMA</button>
    <div id="login-err" style="color:var(--red); font-size:0.7rem; margin-top:1rem;"></div>
  </div>
</div>

<div id="app">
  <header class="app-header">
    <div>
      <div style="font-family:'Orbitron'; color:var(--cyan); font-weight:900;">ALPHA v1.0</div>
      <div style="font-size:0.6rem; color:var(--muted);">SISTEMA DE CONTROL FINANCIERO</div>
    </div>
    <button class="nav-btn" onclick="logout()" style="border-color:var(--red); color:var(--red);">SALIR</button>
  </header>

  <nav class="nav">
    <button class="nav-btn active" onclick="showPanel('p-dashboard')">TABLERO</button>
    <button class="nav-btn" onclick="showPanel('p-movimientos')">MOVIMIENTOS</button>
    <button class="nav-btn" onclick="showPanel('p-metas')">METAS</button>
  </nav>

  <main id="p-dashboard" class="panel active">
    <div class="g4">
      <div class="card"><div style="font-size:0.6rem;">BALANCE TOTAL</div><div id="bal-total" class="card-val">$ 0.00</div></div>
      <div class="card"><div style="font-size:0.6rem;">INGRESOS MES</div><div id="bal-ing" class="card-val" style="color:var(--green)">$ 0.00</div></div>
      <div class="card"><div style="font-size:0.6rem;">GASTOS MES</div><div id="bal-gas" class="card-val" style="color:var(--red)">$ 0.00</div></div>
      <div class="card"><div style="font-size:0.6rem;">AHORRO</div><div id="bal-aho" class="card-val" style="color:var(--purple)">$ 0.00</div></div>
    </div>
    <div class="card">
      <h3 style="font-family:'Orbitron'; font-size:0.8rem; margin-bottom:1rem;">ESTADO DEL SISTEMA</h3>
      <p style="font-size:0.8rem; color:var(--muted);">Bienvenido al centro de mando. Aquí verás el resumen de tus finanzas.</p>
    </div>
  </main>

  <main id="p-movimientos" class="panel">
    <div class="card">
        <h3 style="font-family:'Orbitron'; font-size:0.8rem; margin-bottom:1rem;">NUEVO REGISTRO</h3>
        <p>Próximamente: Formulario completo de carga.</p>
    </div>
  </main>

  <main id="p-metas" class="panel">
    <div class="card">
        <h3 style="font-family:'Orbitron'; font-size:0.8rem; margin-bottom:1rem;">METAS DE AHORRO</h3>
        <p>Próximamente: Seguimiento de objetivos.</p>
    </div>
  </main>
</div>

<script>
// --- CONFIGURACIÓN Y BASE DE DATOS ---
let DB = { movimientos: [], metas: [], deudas: [], config: { user: "admin", pin: "1234" } };

function initDB() {
  const saved = localStorage.getItem('finanzas_alpha_db');
  if (saved) {
    try {
        DB = JSON.parse(saved);
    } catch(e) {
        console.error("Error cargando DB");
    }
  } else {
    saveDB();
  }
}

function saveDB() {
  localStorage.setItem('finanzas_alpha_db', JSON.stringify(DB));
}

// --- AUTENTICACIÓN ---
function login() {
  const u = document.getElementById('l-user').value;
  const p = document.getElementById('l-pin').value;
  const err = document.getElementById('login-err');

  if (u === DB.config.user && p === DB.config.pin) {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    renderDashboard();
  } else {
    err.textContent = "ACCESO DENEGADO: CREDENCIALES INVÁLIDAS";
    setTimeout(() => err.textContent = "", 3000);
  }
}

function logout() {
    location.reload();
}

// --- NAVEGACIÓN ---
function showPanel(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList
